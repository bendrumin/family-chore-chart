<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing - ChoreStar</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ChoreStar Pricing</h1>
            <p>Choose the perfect plan for your family</p>
        </header>

        <main class="pricing-container">
            <div class="pricing-card free">
                <div class="pricing-header">
                    <h2>Free</h2>
                    <div class="price">$0<span>/month</span></div>
                </div>
                <ul class="features">
                    <li>‚úÖ Up to 3 children</li>
                    <li>‚úÖ Basic chore tracking</li>
                    <li>‚úÖ Weekly view</li>
                    <li>‚úÖ Basic icons</li>
                    <li>‚úÖ Email support</li>
                </ul>
                <button class="btn btn-secondary" disabled>Current Plan</button>
            </div>

            <div class="pricing-card premium featured">
                <div class="pricing-badge">Most Popular</div>
                <div class="pricing-header">
                    <h2>Premium</h2>
                    <div class="price">$4.99<span>/month</span></div>
                </div>
                <ul class="features">
                    <li>‚úÖ Unlimited children</li>
                    <li>‚úÖ Custom chore colors</li>
                    <li>‚úÖ Expanded icon sets</li>
                    <li>‚úÖ Chore categories</li>
                    <li>‚úÖ Unlimited chores</li>
                    <li>‚úÖ Priority support</li>
                    <li>‚úÖ Advanced analytics</li>
                </ul>
                <button class="btn btn-primary" onclick="upgradeToPremium()" data-price-id="pro_01k88sgf2e0gd4maaxq3asx6zy">Upgrade Now</button>
            </div>

            <div class="pricing-card annual">
                <div class="pricing-header">
                    <h2>Annual</h2>
                    <div class="price">$49.99<span>/year</span></div>
                    <div class="savings">Save 17%</div>
                </div>
                <ul class="features">
                    <li>‚úÖ Everything in Premium</li>
                    <li>‚úÖ 2 months free</li>
                    <li>‚úÖ Priority feature requests</li>
                    <li>‚úÖ Family sharing</li>
                </ul>
                <button class="btn btn-primary" onclick="upgradeToAnnual()" data-price-id="pro_01k88smgyx84j22jzdycren1yq">Choose Annual</button>
            </div>
        </main>

        <section class="faq-section">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <h3>Can I cancel anytime?</h3>
                <p>Yes! You can cancel your subscription at any time. You'll keep access to Premium features until the end of your billing period.</p>
            </div>

            <div class="faq-item">
                <h3>What payment methods do you accept?</h3>
                <p>We accept all major credit cards, PayPal, and other payment methods through our secure payment processor.</p>
            </div>

            <div class="faq-item">
                <h3>Is there a free trial?</h3>
                <p>Yes! You can try Premium features for 7 days free. No credit card required to start your trial.</p>
            </div>

            <div class="faq-item">
                <h3>Can I change plans later?</h3>
                <p>Absolutely! You can upgrade or downgrade your plan at any time through your account settings.</p>
            </div>
        </section>
    </div>

    <script>
        // Paddle Payment Integration
        class PaddlePayment {
            constructor() {
                this.apiUrl = '/api/create-paddle-checkout';
            }

            async createCheckout(priceId, customerId, email) {
                try {
                    const response = await fetch(this.apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            priceId,
                            customerId,
                            email
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('‚ùå Paddle checkout creation failed:', error);
                    throw error;
                }
            }

            async startCheckout(priceId, customerId, email) {
                try {
                    const checkout = await this.createCheckout(priceId, customerId, email);
                    
                    // Redirect to Paddle checkout
                    window.location.href = checkout.checkoutUrl;
                    
                } catch (error) {
                    console.error('‚ùå Failed to start Paddle checkout:', error);
                    alert('Payment system is currently unavailable. Please try again later or contact support.');
                }
            }
        }

        const paddlePayment = new PaddlePayment();

        function upgradeToPremium() {
            const priceId = 'pro_01k88sgf2e0gd4maaxq3asx6zy'; // Monthly plan
            const customerId = 'user_' + Date.now(); // You can get this from your user system
            const email = 'user@example.com'; // You can get this from your user system
            
            paddlePayment.startCheckout(priceId, customerId, email);
        }

        function upgradeToAnnual() {
            const priceId = 'pro_01k88smgyx84j22jzdycren1yq'; // Annual plan
            const customerId = 'user_' + Date.now(); // You can get this from your user system
            const email = 'user@example.com'; // You can get this from your user system
            
            paddlePayment.startCheckout(priceId, customerId, email);
        }
    </script>
</body>
</html>
