<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing - ChoreStar</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1>üè† ChoreStar</h1>
                    <p>Choose the perfect plan for your family</p>
                </div>
                <div class="header-right">
                    <a href="/" class="btn btn-outline">‚Üê Back to App</a>
                </div>
            </div>
        </header>

        <main class="pricing-container">
            <div class="pricing-card free">
                <div class="pricing-header">
                    <h2>Free</h2>
                    <div class="price">$0<span>/month</span></div>
                </div>
                <ul class="features">
                    <li>‚úÖ Up to 3 children</li>
                    <li>‚úÖ Basic chore tracking</li>
                    <li>‚úÖ Weekly view</li>
                    <li>‚úÖ Basic icons</li>
                    <li>‚úÖ Email support</li>
                </ul>
                <button class="btn btn-secondary" disabled>Current Plan</button>
            </div>

            <div class="pricing-card premium featured">
                <div class="pricing-badge">Most Popular</div>
                <div class="pricing-header">
                    <h2>Premium</h2>
                    <div class="price">$4.99<span>/month</span></div>
                </div>
                <ul class="features">
                    <li>‚úÖ Unlimited children</li>
                    <li>‚úÖ Custom chore colors</li>
                    <li>‚úÖ Expanded icon sets</li>
                    <li>‚úÖ Chore categories</li>
                    <li>‚úÖ Unlimited chores</li>
                    <li>‚úÖ Priority support</li>
                    <li>‚úÖ Advanced analytics</li>
                </ul>
                <button class="btn btn-primary" onclick="upgradeToPremium()" data-price-id="pro_01k88sgf2e0gd4maaxq3asx6zy">Upgrade Now</button>
            </div>

            <div class="pricing-card annual">
                <div class="pricing-header">
                    <h2>Annual</h2>
                    <div class="price">$49.99<span>/year</span></div>
                    <div class="savings">Save 17%</div>
                </div>
                <ul class="features">
                    <li>‚úÖ Everything in Premium</li>
                    <li>‚úÖ 2 months free</li>
                    <li>‚úÖ Priority feature requests</li>
                    <li>‚úÖ Family sharing</li>
                </ul>
                <button class="btn btn-primary" onclick="upgradeToAnnual()" data-price-id="pro_01k88smgyx84j22jzdycren1yq">Choose Annual</button>
            </div>

            <div class="pricing-card lifetime">
                <div class="pricing-badge">Best Value</div>
                <div class="pricing-header">
                    <h2>Lifetime</h2>
                    <div class="price">$149.99<span> one-time</span></div>
                    <div class="savings">Save 75%</div>
                </div>
                <ul class="features">
                    <li>‚úÖ Everything in Premium</li>
                    <li>‚úÖ Lifetime access</li>
                    <li>‚úÖ All future features included</li>
                    <li>‚úÖ Priority feature requests</li>
                    <li>‚úÖ Family sharing</li>
                    <li>‚úÖ No recurring charges</li>
                </ul>
                <button class="btn btn-primary" onclick="upgradeToLifetime()">Choose Lifetime</button>
            </div>
        
            <section class="faq-section" aria-labelledby="faq-heading">
                <h2 id="faq-heading">Frequently Asked Questions</h2>
            
                <div class="faq-item">
                    <h3>Can I cancel anytime?</h3>
                    <p>Yes! You can cancel your subscription at any time. You'll keep access to Premium features until the end of your billing period.</p>
                </div>

                <div class="faq-item">
                    <h3>What payment methods do you accept?</h3>
                    <p>We accept all major credit cards, PayPal, and other payment methods through our secure payment processor.</p>
                </div>

                <div class="faq-item">
                    <h3>Is there a free trial?</h3>
                    <p>Yes! You can try Premium features for 7 days free. No credit card required to start your trial.</p>
                </div>

                <div class="faq-item">
                    <h3>Can I change plans later?</h3>
                    <p>Absolutely! You can upgrade or downgrade your plan at any time through your account settings.</p>
                </div>
            </section>
        </main>
    </div>

    <script>
        // PayPal Payment Integration
        class PayPalPayment {
            constructor() {
                this.apiUrl = '/api/create-paypal-checkout';
            }

            async createCheckout(planType, customerId, email) {
                try {
                    const response = await fetch(this.apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            planType,
                            customerId,
                            email
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error('‚ùå PayPal checkout creation failed:', error);
                    throw error;
                }
            }

            async startCheckout(planType, customerId, email) {
                try {
                    const checkout = await this.createCheckout(planType, customerId, email);
                    
                    // Redirect to PayPal checkout
                    window.location.href = checkout.approvalUrl;
                    
                } catch (error) {
                    console.error('‚ùå Failed to start PayPal checkout:', error);
                    alert('Payment system is currently unavailable. Please try again later or contact support.');
                }
            }
        }

        const paypalPayment = new PayPalPayment();

        function upgradeToPremium() {
            const planType = 'monthly'; // Monthly plan
            const customerId = 'user_' + Date.now(); // You can get this from your user system
            const email = 'user@example.com'; // You can get this from your user system
            
            paypalPayment.startCheckout(planType, customerId, email);
        }

        function upgradeToAnnual() {
            const planType = 'annual'; // Annual plan
            const customerId = 'user_' + Date.now(); // You can get this from your user system
            const email = 'user@example.com'; // You can get this from your user system
            
            paypalPayment.startCheckout(planType, customerId, email);
        }

        function upgradeToLifetime() {
            const planType = 'lifetime'; // Lifetime plan
            const customerId = 'user_' + Date.now(); // You can get this from your user system
            const email = 'user@example.com'; // You can get this from your user system
            
            paypalPayment.startCheckout(planType, customerId, email);
        }
    </script>
</body>
</html>
